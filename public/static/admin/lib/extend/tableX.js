!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}({12:function(e,t,n){n(13)},13:function(e,t){layui.define(["layer","table","laytpl","form","util","contextMenu"],function(e){var t=layui.jquery,n=layui.layer,a=layui.table,o=layui.laytpl,r=(layui.form,layui.util,layui.contextMenu),i=layui.device,l={merges:function(e,n,o){if(e)if(n){var r=t('[lay-filter="'+e+'"]+.layui-table-view>.layui-table-box>.layui-table-body>table'),i=r.find(">tbody>tr");r.addClass("layui-table-x");for(var d=0;d<n.length;d++)c(e,n[d],o?o[d]:void 0);i.find('[del="true"]').remove(),a.on("sort("+e+")",function(t){l.merges(e,n,o)})}else console.warn("merge indexs not be null");else console.error("table filter not be null");function c(e,t,n){var o=a.cache[e];if(o.length>0){var r,l=1;r=n?o[0][n]:i.eq(0).find("td").eq(t).find(".layui-table-cell").html();for(var d=1;d<o.length;d++){var c;if((c=n?o[d][n]:i.eq(d).find("td").eq(t).find(".layui-table-cell").html())==r){if(l++,d==o.length-1){i.eq(d-l+1).find("td").eq(t).attr("rowspan",l);for(var u=1;u<l;u++)i.eq(d-u+1).find("td").eq(t).attr("del","true")}}else{i.eq(d-l).find("td").eq(t).attr("rowspan",l);for(u=1;u<l;u++)i.eq(d-u).find("td").eq(t).attr("del","true");l=1,r=c}}}}},exportData:function(e){var t=e.cols,o=e.data,r=e.fileName,d=e.expType,c=e.option;if(i.ie)return n.msg("不支持ie导出");if(o&&"string"==typeof o){var u=n.msg("加载中..",{icon:16,shade:.01,time:0});c.url=o,l.loadUrl(c,function(t){n.close(u),e.data=t,l.exportData(e)})}for(var s=0;s<t.length;s++)for(var f=0;f<t[s].length;f++)null==t[s][f].type&&(t[s][f].type="normal"),null==t[s][f].hide&&(t[s][f].hide=!1);var p=[],v=[],b=[];a.eachCols(void 0,function(e,t){"normal"!=t.type||t.hide||(p.push(t.title?t.title:""),v.push(t.field?t.field:"txField_"+e))},t);var h=l.parseTbData(t,l.deepClone(o),!0);for(s=0;s<h.length;s++){var m=[];for(f=0;f<v.length;f++){var y=h[s][v[f]];"string"==typeof y&&(y=y.replace(/,/g,"，")),m.push(y)}b.push(m)}var g,x,w={csv:"text/csv",xls:"application/vnd.ms-excel"}[d],C=document.createElement("a");C.href="data:"+w+";charset=utf-8,\ufeff"+encodeURIComponent((g=[],x=[],layui.each(b,function(e,t){var n=[];layui.each(p,function(t,n){0==e&&g.push(n||"")}),layui.each(a.clearCacheKey(t),function(e,t){n.push(t)}),x.push(n.join(","))}),p.join(",")+"\r\n"+b.join("\r\n"))),C.download=(r||"table")+"."+(d||"xls"),document.body.appendChild(C),C.click(),document.body.removeChild(C)},render:function(e){var n=t(e.elem).attr("lay-filter");e.autoSort=!1;var o=a.render(e);return a.on("sort("+n+")",function(n){var a=n.field,r=n.type,i=t.extend(e.where,{sort:a,order:r});o.reload({where:i,page:{curr:1}})}),o},renderFront:function(e){var o,r=t(e.elem).attr("lay-filter");e.autoSort=!1;for(var i=0;i<e.cols.length;i++)for(var d=0;d<e.cols[i].length;d++)e.cols[i][d].templet&&!e.cols[i][d].field&&(e.cols[i][d].field="txField_"+i+"_"+d);if(e.url){var c=n.msg("加载中..",{icon:16,shade:.01,time:0});l.loadUrl(e,function(a){n.close(c);var i=l.deepClone(e);i.data=a,i.url="",(o=l.renderFront(i)).reloadUrl=function(a){var i=l.deepClone(e);a&&(i=t.extend(i,a));var d=n.msg("加载中..",{icon:16,shade:.01,time:0});l.loadUrl(i,function(e){n.close(d),l.parseTbData(i.cols,e),l.putTbData(r,e),t('input[tb-search="'+r+'"]').val(""),o.reload({url:"",data:e,page:{curr:1}})})}})}else l.parseTbData(e.cols,e.data),l.putTbData(r,e.data),o=a.render(e),l.renderAllTool(o);return o},renderAllTool:function(e){u(e),c(e),d(e),s(e)},loadUrl:function(e,a){e.response=t.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",countName:"count"},e.response);e.request;var o=e.response,r=t.extend({},e.where);e.contentType&&0==e.contentType.indexOf("application/json")&&(r=JSON.stringify(r)),t.ajax({type:e.method||"get",url:e.url,contentType:e.contentType,data:r,dataType:"json",headers:e.headers||{},success:function(t){if("function"==typeof e.parseData&&(t=e.parseData(t)||t),t[o.statusName]!=o.statusCode){var r=t[o.msgName]||"返回的数据不符合规范，正确的成功状态码 ("+o.statusName+") 应为："+o.statusCode;n.msg(r,{icon:2})}else a(t[o.dataName])},error:function(e,t){n.msg("数据接口请求异常："+t,{icon:2})}})},parseTbData:function(e,n,r){var i=[];a.eachCols(void 0,function(e,n){if(n.templet){var a={field:n.field&&(r||0==n.field.indexOf("txField_"))?n.field:"txField_"+e};"string"==typeof n.templet?a.templet=function(e){var a=void 0;return o(t(n.templet).html()).render(e,function(e){a=e}),a}:a.templet=n.templet,i.push(a)}},e);for(var l=0;l<n.length;l++)for(var d=n[l],c=0;c<i.length;c++){var u="<div>"+i[c].templet(d)+"</div>";d[i[c].field]=t(u).not(".export-hide").text().replace(/(^\s*)|(\s*$)/g,"")}return n},getTbData:function(e){var t=window.tbX.cache[e];return null==t&&(t=a.cache[e]),l.deepClone(t)},putTbData:function(e,t){return window.tbX.cache[e]=t,t},bindCtxMenu:function(e,n){var o=a.cache[e],i="#"+e+"+.layui-table-view .layui-table-body tr";t(i).bind("contextmenu",function(e){for(var a=t(this),l=t(this).attr("data-index"),d=[],c=0;c<n.length;c++){var u=n[c];d.push({icon:u.icon,name:u.name,click:function(){var e=t(this).attr("lay-id");n[parseInt(e.substring(8))].click(o[l]),a.removeClass("layui-table-click")}})}return t(i).removeClass("layui-table-click"),a.addClass("layui-table-click"),r.show(d,e.clientX,e.clientY),!1})},filterData:function(e,t,n){for(var a,o=[],r=0;r<e.length;r++){var i=e[r];if(!a)if(t)a=t.split(",");else for(var d in a=[],i)a.push(d);for(var c=0;c<a.length;c++)if(l.isContains(i[a[c]],n)){o.push(i);break}}return o},isContains:function(e,t){return e||(e=""),t||(t=""),(e=e.toString().toLowerCase())==(t=t.toString().toLowerCase())||-1!=e.indexOf(t)},deepClone:function(e){var t,n=l.isClass(e);if("Object"===n)t={};else{if("Array"!==n)return e;t=[]}for(var a in e){var o=e[a];"Object"==l.isClass(o)?t[a]=arguments.callee(o):"Array"==l.isClass(o)?t[a]=arguments.callee(o):t[a]=e[a]}return t},isClass:function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}};window.tbX||(window.tbX=new Object),window.tbX.cache||(window.tbX.cache=new Object),window.tbX.cacheSearch||(window.tbX.cacheSearch=new Object);var d=function(e){var a=e.config.id,o=t('input[tb-search="'+a+'"]');o&&o.length>0&&(o.attr("placeholder")||o.attr("placeholder","输入关键字按回车键搜索"),o.off("keydown").on("keydown",function(t){if(13==t.keyCode){var r=o.attr("name"),i=o.val().replace(/(^\s*)|(\s*$)/g,""),d=n.msg("搜索中..",{icon:16,shade:.01,time:0}),c=l.getTbData(a),u=l.filterData(c,r,i);window.tbX.cacheSearch[a]=u,e.reload({url:"",data:u,page:{curr:1}}),n.close(d)}}))},c=function(e){var t=e.config.id;a.on("sort("+t+")",function(a){var o=a.field,r=a.type,i=n.msg("加载中..",{icon:16,shade:.01,time:0}),d=window.tbX.cacheSearch[t];d||(d=l.getTbData(t)),r&&(d=d.sort(function(e,t){var n=e[o],a=t[o];return"asc"==r?n==a?0:n<a?-1:1:n==a?0:n<a?1:-1})),e.reload({initSort:a,url:"",data:d,page:{curr:1}}),n.close(i)})},u=function(e){t('[tb-refresh="'+e.config.id+'"]').off("click").on("click",function(){e.reloadUrl?e.reloadUrl():e.reload({page:{curr:1}})})},s=function(e){var o=e.config.id;t('[tb-export="'+o+'"]').off("click").on("click",function(r){if(!(t(this).find(".tbx-dropdown-menu").length>0)){void 0!==r&&(r.preventDefault(),r.stopPropagation());'      <div class="tbx-dropdown-menu-item" data-type="check">导出选中数据</div>','      <div class="tbx-dropdown-menu-item" data-type="current">导出当前页数据</div>','      <div class="tbx-dropdown-menu-item" data-type="all">导出全部数据</div>',"   </div>",t(this).append('<div class="tbx-dropdown-menu">      <div class="tbx-dropdown-menu-item" data-type="check">导出选中数据</div>      <div class="tbx-dropdown-menu-item" data-type="current">导出当前页数据</div>      <div class="tbx-dropdown-menu-item" data-type="all">导出全部数据</div>   </div>'),t(this).addClass("tbx-dropdown-btn"),t(this).parent().css("position","relative"),t(this).parent().css("z-index","9998"),t(".tbx-dropdown-menu").off("click").on("click",".tbx-dropdown-menu-item",function(r){var i=t(this).data("type");if("check"==i){var d=a.checkStatus(o);0==d.data.length?n.msg("请选择要导出的数据",{icon:2}):(t(".tbx-dropdown-menu").remove(),l.exportData({fileName:e.config.title,cols:e.config.cols,data:d.data}))}else"current"==i?l.exportData({fileName:e.config.title,cols:e.config.cols,data:a.cache[o]}):"all"==i&&l.exportData({fileName:e.config.title,cols:e.config.cols,data:l.getTbData(o)});void 0!==r&&(r.preventDefault(),r.stopPropagation())})}}),t(document).off("click.tbxDropHide").on("click.tbxDropHide",function(){t(".tbx-dropdown-menu").remove()})};t("head").append("<style>.tbx-dropdown-btn {        position: relative;   }   .tbx-dropdown-btn:hover {        opacity: 1   }   .tbx-dropdown-menu {        position: absolute;        top: 100%;        right: 0;        padding: 5px 0;        margin: 5px 0 0 0;        overflow: visible;        min-width: 110px;        background: #fff;        border-radius: 2px;        box-shadow: 0 2px 4px rgba(0, 0, 0, .12);        border: 1px solid #d2d2d2;        z-index: 9998;        cursor: default;   }   .tbx-dropdown-menu .tbx-dropdown-menu-item {        display: block;        color: #555;        font-size: 14px;        padding: 10px 15px;        text-decoration: none;        white-space: nowrap;        cursor: pointer;        user-select: none;        line-height: normal;   }   .tbx-dropdown-menu .tbx-dropdown-menu-item:hover {        background-color: #eeeeee;   }   .export-show {        display: none;   }</style>"),e("tableX",l)})}});